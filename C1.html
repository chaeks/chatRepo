<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IFrame Event Trigger</title>
<style>
    /* Add your CSS styles here */
</style>
</head>
<body>
<h1>Welcome to Gen AI Tool POC</h1>
<h4>URL in iFrame: https://amitgitee.github.io/poc/</h4>
<h5>Add your message below and click on the button to send the message to Salesforce:</h5>
<!--<input type="text" id="messageInput" placeholder="Enter your message">-->
<textarea id="messageInput" name="iFrameMessageInput" rows="5" cols="60"></textarea><br><br>
<button id="triggerButton">Send Message to SF</button>

<script>
document.addEventListener("DOMContentLoaded", function() {
    // Find the button element
    var triggerButton = document.getElementById('triggerButton');

    // Add a click event listener to the button
    triggerButton.addEventListener('click', function() {
        // Send a message to the parent window
        var message = document.getElementById('messageInput').value;
        console.log('message git'+ message);
        const payload1 = {
         type: "OpenLink",
         article_id : "0000_us",
         link_id : "ka0700000",
         source: "agent-copilot"
         };
        console.log('payload git'+ JSON.stringify( payload1));
        
        //const customEvt = new CustomEvent("NonClickableLink", {details: payload });
        const customEvt = {type: 'NonClickableLink' , payload : payload1 };
        console.log(customEvt);
        
        window.postMessage(customEvt, '*');
        
        console.log('index.html>>> Button Clicked');
        window.postMessage(message, '*');
        //document.dispatchEvent(customEvt);
        
       // window.parent.postMessage(customEvt, '*');
    });
});
</script>

</body>
</html>
