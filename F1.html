<script>
    var fiatstoreURL       = window.location.href;         <!-- Set the Page URL -->
    var fiatstoreSessionId = '';         <!-- Set the Session ID URL -->
    var fiatstoreBrand     = 'Fiat';           <!-- Set the Brand example Jeep,Ram etc -->
    var fiatstorePhone     = '';
    var phoneUS = fiatstorePhone.replace(/[&\/\\#, +()$~%.'":*?<>{}-]/g, '');
    var fiatstoreVIN       = '';                      //Set the VIN (optional)
    var uid = ""; // Please set the customer UID From Gigya sent by CC
    var minimizeFlag = false;  //To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days
    var hashEmail = '';  
    var visitorMessageCount = false;
	var chatEstablished =false;
    
    </script>
    <style type='text/css'>
            :root {
            --brandColor : #E70000;
            --iconSize : 70px;
            }
             /*CSS Changes - class name change*/
            .chat-icon-bar{
            position : fixed;
            top:82%;
            right : 12px;
            z-index: 1060;
            -webkit-transform : translateY(-50%);
            -ms-transform : translateY(-50%);
            transform  : translateY(-50%);
            }
            .circle{
            width : var(--iconSize);
            height : var(--iconSize);
            border-radius : 50%;
            z-index: 1065;
            box-shadow: 0 0 12px 0 rgb(0 0 0 / 50%);
            border: 6px solid var(--brandColor);
            /*To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days start*/
            transition: all .2s ease-in-out;  
            animation:grow 2s infinite;
            /*To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days End*/
            }
            .circle:hover {
            cursor: pointer;
            }
            /*To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days start*/
            @keyframes grow{
            0% {transform: scale(1);}
            50% {transform: scale(1.1);}
            100% {transform: scale(1);}
            }
            /*To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days End*/
    
            @media(max-width : 620px){
                /*CSS Changes - class name change*/
                .chat-icon-bar{
                position : fixed;
                top:82%;
                right : 12px;
                z-index: 1060;
                -webkit-transform : translateY(-50%);
                -ms-transform : translateY(-50%);
                transform  : translateY(-50%);
                }
                .circle{
                height : var(--iconSize);
                width:  var(--iconSize);
                border-radius : 50%;
                bottom : 14%;
                z-index: 1065;
                box-shadow: 0 0 12px 0 rgb(0 0 0 / 50%);
                border: 6px solid var(--brandColor);
                transition: all .2s ease-in-out;  
                animation:grow 2s infinite;
                }
            }
            .embeddedServiceHelpButton .helpButton .uiButton {
            background-color: var(--brandColor);
            font-family: "Arial", sans-serif;
            width: var(--iconSize);
            height:var(--iconSize);
            border-radius: 50%;
            min-width: 5em;
            }
            .embeddedServiceHelpButton .helpButton .uiButton .helpButtonLabel {
            display: none;
            }
            .embeddedServiceHelpButton .helpButton .uiButton .embeddedServiceIcon {
            margin: auto;
            }
            .embeddedServiceHelpButton .embeddedServiceIcon::before {
            font-size: 2.5em;
            display: block;
            }
            .embeddedServiceHelpButton .helpButton .uiButton:focus {
            outline: 1px solid var(--brandColor);
            min-width: 5em;
            border-radius: 50%;
            }
            .embeddedServiceSidebarMinimizedDefaultUI.helpButton{        
            font-family: "Arial", sans-serif;
            border-radius: 50% !important;
            min-width: 3.2em !important;
            width: var(--iconSize) !important;
            height:var(--iconSize) !important;
            }
            .embeddedServiceSidebarMinimizedDefaultUI .minimizedText {
            display: none;
            }
            .embeddedServiceSidebarMinimizedDefaultUI .content{
            padding:0 0px;
            }
            .embeddedServiceSidebarMinimizedDefaultUI{
            width: var(--iconSize) !important;
            height:var(--iconSize)  !important;
            border-radius: 10% !important;
            min-width: 7em !important;
            }
            .message{
            padding: 1px 1px 1px 1px;
            margin: 0px 0px;
            border-style: none;
            }
            .embeddedServiceIcon svg {
            font-size: 2.2em !important;
            }
            .embeddedServiceSidebarMinimizedDefaultUI .messageContent{
            min-width: 3.2em;
            }
            .THIS input.slds-input {
            font-size: 13px !important;
            border-radius: 4px !important;
            padding: 0 12px 0 16px !important;
            line-height: 30px !important;
            width: 90% !important;
            }
            .THIS select.select {
            font-size: 13px !important;
            height: 32px !important;
            }
            .embeddedServiceHelpButton {
            z-index: 1001;
            }
            .embeddedServiceHelpButton .helpButton {
            bottom: 14% !important;
            width: var(--iconSize) !important;
            height:var(--iconSize)  !important;
            }
            .embeddedServiceSidebarMinimizedDefaultUI.helpButton{
            bottom: 14% !important;
            width: var(--iconSize) !important;
            height:var(--iconSize)  !important;
            }
            .embeddedServiceSidebarMinimizedDefaultUI{
            bottom: 14% !important;
            width: var(--iconSize) !important;
            height:var(--iconSize)  !important;
            }
    
            /*To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days Start*/
            .wave{
            position: fixed;
            text-align: center;
            top: 0px; 
            right: 0px;  
            width: var(--iconSize);
            height: var(--iconSize);
            border-radius: 50%;
            background-color: var(--brandColor);
            opacity: 0;
            z-index: -1;
            pointer-events: none;
            animation:Waveeffects 2s linear infinite;
            }
            @keyframes Waveeffects {
            from {
            opacity: 1;
            }
            to {
            transform: scale(1.6);
            opacity: 0;
            }
            }
            /*To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days End*/
    
            @media(max-width: 620px){
                .circle{
                height: var(--iconSize);
                width: var(--iconSize);
                }
                /*To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days Start*/
                .wave{
                height: var(--iconSize);
                width: var(--iconSize);
                position: fixed;
                text-align: center;
                top: 0px; 
                right: 0px;
                border-radius: 50%;
                background-color: var(--brandColor);
                opacity: 0;
                z-index: -1;
                pointer-events: none;
                animation:Waveeffects 2s linear infinite;
                }
                /*To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days End*/
            }
            
        </style>

    <body>
    <script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
    <script type='text/javascript'>
    var initESW = function(gslbBaseURL) {
        embedded_svc.settings.displayHelpButton = false; //Or false
        embedded_svc.settings.language = ''; //For example, enter 'en' or 'en-US'
        //CSS CHANGE Start
        embedded_svc.settings.defaultMinimizedText  = ' '; //(Defaults to Chat with an Expert)
        embedded_svc.settings.disabledMinimizedText = ' '; //(Defaults to Agent Offline)      
        embedded_svc.settings.loadingText = ' '; //(Defaults to Loading)
        //CSS CHANGE End
        //embedded_svc.settings.storageDomain = 'yourdomain.com'; //(Sets the domain for your deployment so that visitors can navigate subdomains during a chat session)
        // Settings for Chat
        //embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
        // Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
        // Returns a valid button ID.
        //};
        //embedded_svc.settings.prepopulatedPrechatFields = {}; //Sets the auto-population of pre-chat form fields
        //embedded_svc.settings.fallbackRouting = []; //An array of button IDs, user IDs, or userId_buttonId
        //embedded_svc.settings.offlineSupportMinimizedText = '...'; //(Defaults to Contact Us)
        embedded_svc.settings.enabledFeatures = ['LiveAgent'];
        embedded_svc.settings.entryFeature = 'LiveAgent';
        embedded_svc.settings.widgetHeight     = '520px';
        embedded_svc.settings.autoOpenPostChat = true;
        //Pre-Populated Fields
        embedded_svc.settings.prepopulatedPrechatFields = {
            FirstName: "", // Please set the First name of the customer
            LastName: "", // Please set the Last name of the customer
            Email: "",    // Please set the Email of the customer
            Phone: phoneUS     
        };        
        <!-- Please avoid to make any changes in the below lines of code -->
    
        var LeadRecordTypeId = '0123Z000000umqJQAQ';
        var ChatRequestRecordTypeId = '012Dz0000007cdfIAA';
            
            embedded_svc.settings.extraPrechatFormDetails = [
                { "label": "fiatstoreURL",               "value": fiatstoreURL,                   "displayToAgent": false},
                { "label": "fiatstoreBrand",     "value": fiatstoreBrand,                 "displayToAgent": false},          
                { "label": "ChatRequestVIN",            "value": fiatstoreVIN,        "displayToAgent": false},
                { "label": "fiatstoreSessionId",         "value": fiatstoreSessionId,             "displayToAgent": false},
                { "label": "LeadRecordTypeId",         "value": LeadRecordTypeId,           "displayToAgent": false},
                { "label": "ChatRequestRecordTypeId",  "value": ChatRequestRecordTypeId,    "displayToAgent": false},
                { "label": "caseSourceCR",              "value": "Fiatstore",        "displayToAgent": false},
                { "label": "caseSubject",               "value": "E-Shop: Fiatstore Inquiry",    "displayToAgent": false},
                { "label": "caseDescription",           "value": "E-Shop: Fiatstore Inquiry",    "displayToAgent": false},
                { "label": "caseOrigin",               "value": "Chat",                     "displayToAgent": false},
                { "label": "caseType",                 "value": "Regular",                  "displayToAgent": false},
                { "label": "caseMarket",               "value": "USA",                      "displayToAgent": false},
                { "label": "caseLOB",                  "value": "Marketplace",              "displayToAgent": false},
                { "label": "caseStatus",               "value": "Closed",                   "displayToAgent": false},
                { "label": "caseCloseReason",          "value": "Closed by System",         "displayToAgent": false},
                { "label": "caseInboundOutbound",      "value": "Inbound",                  "displayToAgent": false},
                { "label": "caseSource",               "value": "Customer",                 "displayToAgent": false},
                { "label": "caseCloseSynopsis",        "value": "Fiatstore chat case concluded by System",   "displayToAgent": false},
                { "label": "caseSourceDetails",        "value": fiatstoreBrand,            "displayToAgent": false},
                { "label": "fiatstoreValue",     "value": "Fiatstore",              	"displayToAgent": false},
                {
                    "label": "Source details",
                    "value": "Fiatstore",
                    "transcriptFields":[ "CC_Source_details__c" ],
                    "displayToAgent":false
                },  
                { "label": "uid",         "value": uid,             "displayToAgent": false}       
            ];
        embedded_svc.settings.extraPrechatInfo = [
            {
                "entityName": "CC_ChatRequest__c",
                "saveToTranscript":"CC_LiveTranscriptChatRequest__c",
                "showOnCreate": true,
                "entityFieldMaps": [
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_CustomerFirstName__c",
                        "isExactMatch": false,
                        "label": "First Name"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_Brand__c",
                        "isExactMatch": false,
                        "label": "fiatstoreBrand"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_CustomerLastName__c",
                        "isExactMatch": false,
                        "label": "Last Name"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_CustomerEmail__c",
                        "isExactMatch": false,
                        "label": "Email 1"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_CustomerPhone__c",
                        "isExactMatch": false,
                        "label": "Phone Number Type 1"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "eShop_Reasonforcontact__c",
                        "isExactMatch": false,
                        "label": "Reason for contact"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "RecordTypeId",
                        "isExactMatch": false,
                        "label": "ChatRequestRecordTypeId"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_CustomerVIN__c",
                        "isExactMatch": false,
                        "label": "ChatRequestVIN"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_CustomerSource__c",
                        "isExactMatch": false,
                        "label": "caseSourceCR"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "eShop_ChatSubmittedURL__c",
                        "isExactMatch": false,
                        "label": "fiatstoreURL"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "eShop_SessionId__c",
                        "isExactMatch": false,
                        "label": "fiatstoreSessionId"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_CustomerComment__c",
                        "isExactMatch": false,
                        "label": "Comments"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "Customer_UID__c",
                        "isExactMatch": false,
                        "label": "uid"
                    }
                ]
            }, {
                "entityName": "Lead",
                "saveToTranscript":"LeadId",
                "linkToEntityName": "CC_ChatRequest__c",
                "linkToEntityField": "Lead__c",
                "showOnCreate": true,
                "entityFieldMaps": [
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "FirstName",
                        "isExactMatch": false,
                        "label": "First Name"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "LastName",
                        "isExactMatch": false,
                        "label": "Last Name"
                    },
                    {
                        "doCreate": true,
                        "doFind": true,
                        "fieldName": "Email",
                        "isExactMatch": true,
                        "label": "Email 1"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "Phone",
                        "isExactMatch": false,
                        "label": "Phone Number Type 1"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "RecordTypeId",
                        "isExactMatch": false,
                        "label": "LeadRecordTypeId"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_BrandInterest__c",
                        "isExactMatch": false,
                        "label": "caseSourceDetails"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "LeadSource",
                        "isExactMatch": false,
                        "label": "caseSourceCR"
                    }
                ]
            },{
                "entityName": "Case",
                "saveToTranscript":"CaseId",
                "linkToEntityName": "CC_ChatRequest__c",
                "linkToEntityField": "CC_Case__c",
                "showOnCreate": true,
                "entityFieldMaps": [
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "Subject",
                        "isExactMatch": false,
                        "label": "caseSubject"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "Description",
                        "isExactMatch": false,
                        "label": "caseDescription"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_ContactFirstName__c",
                        "isExactMatch": false,
                        "label": "First Name"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_ContactLastName__c",
                        "isExactMatch": false,
                        "label": "Last Name"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "Origin",
                        "isExactMatch": false,
                        "label": "caseOrigin"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "Type",
                        "isExactMatch": false,
                        "label": "caseType"  
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_Market__c",
                        "isExactMatch": false,
                        "label": "caseMarket"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_LOB__c",
                        "isExactMatch": false,
                        "label": "caseLOB"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "Status",
                        "isExactMatch": false,
                        "label": "caseStatus"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_Case_Closure_Reason__c",
                        "isExactMatch": false,
                        "label": "caseCloseReason"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_Synopsis__c",
                        "isExactMatch": false,
                        "label": "caseCloseSynopsis"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_CaseSource__c",
                        "isExactMatch": false,
                        "label": "caseSource"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_InboundOutbound__c",
                        "isExactMatch": false,
                        "label": "caseInboundOutbound"
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "CC_SourceDetails__c",
                        "isExactMatch": false,
                        "label": "caseSourceDetails" 
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "Source__c",
                        "isExactMatch": false,
                        "label": "caseSourceCR" 
                    },
                    {
                        "doCreate": true,
                        "doFind": false,
                        "fieldName": "GSDP_Contact_Reason_Area__c",
                        "isExactMatch": false,
                        "label": "caseLOB"
                    }
                ]
            },{
                "entityName": "Contact",
                "entityFieldMaps": [
                    {
                        "doCreate": false,
                        "doFind": false,
                        "fieldName": "FirstName",
                        "isExactMatch": false,
                        "label": "First Name"
                    },
                    {
                        "doCreate": false,
                        "doFind": false,
                        "fieldName": "LastName",
                        "isExactMatch": false,
                        "label": "Last Name"
                    },
                    {
                        "doCreate": false,
                        "doFind": false,
                        "fieldName": "Email",
                        "isExactMatch": false,
                        "label": "Email 1"
                    },
                    {
                        "doCreate": false,
                        "doFind": false,
                        "fieldName": "Phone",
                        "isExactMatch": false,
                        "label": "Phone Number Type 1"
                    }
                ]
            }];
            
			// These are the Standard Salesforce Chat Events. It can be used to add any custom logic. For example: for Triggering analytics events etc. 
			embedded_svc.addEventHandler("onChatEstablished", function(data) {
                var myDate = new Date(Date.now() *1000);
               
            });
                   
            embedded_svc.addEventHandler("onClickSubmitButton", function(data) {
                
            });
            //new
            embedded_svc.addEventHandler("onHelpButtonClick", function(data) {
                
            });
            embedded_svc.addEventHandler("onChatRequestSuccess", function(data) {
                
            });
            embedded_svc.addEventHandler("onChatEstablished", function(data) {
                //Dont remove below 2 lines, this provided by SF team
                const varStyle=document.getElementsByClassName("minimizedText");
                varStyle[0].style.display='block';
		    chatEstablished = true;
		    alert(chatEstablished);
            });
            embedded_svc.addEventHandler("onChatTransferSuccessful", function(data) {
                
            });
            embedded_svc.addEventHandler("onChatEndedByChasitor", function(data) {
                
                
                if (!visitorMessageCount){
                    
                }else{
                    
                }
                
                
            });
            embedded_svc.addEventHandler("onChatEndedByAgent", function(data) {
                
            });
           
            embedded_svc.addEventHandler("onChasitorMessage", function(data) {
                if (!visitorMessageCount){
                    visitorMessageCount = true; 
                }
            });
            
            embedded_svc.addEventHandler("onAgentMessage", function(data) {
                //Dont remove below 2 lines, this provided by SF team
                const varStyle=document.getElementsByClassName("minimizedText");
                varStyle[0].style.display='block';
                
            });
            embedded_svc.addEventHandler("onChatEndedByChatbot", function(data) {
                
            });        
            embedded_svc.addEventHandler("afterMinimize", function(data) {
                
                
                document.querySelector('#IconImage').style="display : none;";
                //To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days Start
                document.querySelector('.wave').style = "display:none;";
                minimizeFlag = true;
                //To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days End
                 if (chatEstablished){
			 const varStyle=document.getElementsByClassName("minimizedText");
                varStyle[0].style.display='block';
		 }
            });
            embedded_svc.addEventHandler("afterMaximize", function(data) {
                //isSFChatInit    = 'Y';
                
                document.querySelector('#IconImage').style="display : none;";
                //To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days Start
                document.querySelector('.wave').style = "display:none;";
                minimizeFlag = true;
                //To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days End
                
            });
            embedded_svc.addEventHandler("afterDestroy", function(data) {
                //Dont remove below 2 lines, this provided by SF team
                const varStyle=document.getElementsByClassName("embeddedServiceIcon");
                varStyle[0].style.display='block';
                
                //To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days Start
                minimizeFlag = false; 
                getHolidayList();
                //To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days End
               
                
        
            });

            embedded_svc.init(
    'https://fcagroup--mktplace.sandbox.my.salesforce.com',
    'https://fcagroup--mktplace.sandbox.my.salesforce-sites.com/Tier1ExternalSite',
    gslbBaseURL,
    '00DDz000001qbuj',
    'Fiatstore_Marketplace', {
        baseLiveAgentContentURL: 'https://c.la3-c1cs-ia7.salesforceliveagent.com/content',
        deploymentId: '572Dz00000000sT',
        buttonId: '573Dz0000000arH',
        baseLiveAgentURL: 'https://d.la3-c1cs-ia7.salesforceliveagent.com/chat',
        eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04IDz0000004CVsMAM_18a898768e6',
        isOfflineSupportEnabled: false
    }
);
    
    };
    if (!window.embedded_svc) {
		var s = document.createElement('script');
		s.setAttribute('src', 'https://fcagroup--mktplace.sandbox.my.salesforce.com/embeddedservice/5.0/esw.min.js');
		s.onload = function() {
			initESW(null);
		};
		document.body.appendChild(s);
	} else {
		initESW('https://service.force.com');
	}
    
    window.addEventListener("message", function(event) {
        if (event.data.name === "Marketplace_FormFilled") {
            //mAnalystic.ChatFormStart();
        }
        
        if (event.data.name === "Marketplace_EmailValue") {
            hashEmail = event.data.payload;
        }
        
    }, false);
    
    </script>
      <a href="F2.html"> F2 pgage</a>
      <a href="F3.html"> F3 pgage</a>
    <!-- CSS change -->
        <div class = "chat-icon-bar" >
                <img id="IconImage" src="" 
                     onclick="bootstrapChat()" class="circle" style="display:none;" title="" />  <!--style="display:none;" added To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days -->
    
                <div class="wave" style="display:none;"></div>  <!--To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days -->
        </div>
    
        <script type='text/javascript'>
            //To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days Start
            function agentOffline(){
                if (!minimizeFlag){  //Because on fast minimize giving wrong UI
                    document.querySelector('#IconImage').style="display : inline;";
                    document.querySelector('.wave').style = "display:none;";
                    document.querySelector('.circle').style = "animation: none;";
                }
            }
            function agentOnline(){
                if (!minimizeFlag){ //Because on fast minimize giving wrong UI
                    document.querySelector('#IconImage').style="display : inline;";
                    document.querySelector('.wave').style = "display:inline;";
                }
            }
            //To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days End
            
            function bootstrapChat() {
            embedded_svc.bootstrapEmbeddedService();
            }
            
        
            //To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days Start
            //NOTE :  holidayList in "DD/MM" format (Christmas, New Year, Thanks Giving-Evaluated using thanksGivingDate method)
            const holidayList = ["25/12", "01/01"];
            /*thanksGivingDate method: used for evaluating thanks Giving Date of current Year*/
            function thanksGivingDate(year) {  
                var date = new Date(year, 10, 1);
                while (date.getDay() !== 4) {
                    date.setDate(date.getDate() + 1);
                }
                date.setDate(date.getDate() + 21);
                let mm = date.getMonth() + 1 ;
                let dd = date.getDate();
                const formattedToday = dd + '/' + mm;
                holidayList.push(formattedToday);
            }
            /*getHolidayList method : used to show online/Offline image icon depending on Holiday, Working Hours, Working Days*/
            function getHolidayList() {  
                var today = new Date();
                //convert to est
                var estDate = new Date ( today.toLocaleString('en-US', {
                    timeZone: 'America/New_York',
                }));
                
                //weekday  0==Sunday 1==Monday 2==Tuesday 3==Wednesday 4==Thurs 5==Friday 6==Sat
                var dayOfWeek = estDate.getDay();   
                let mm = estDate.getMonth() + 1;   
                if (mm%10 == mm ){
                    mm = '0'+mm;
                }
                let dd = estDate.getDate();   
                if (dd%10 == dd ){
                    dd = '0'+dd;
                } 
                const currentDate = dd + '/' + mm;
                thanksGivingDate(estDate.getFullYear());
                
                if ((dayOfWeek != 0 && !holidayList.includes(currentDate))) {
                    if ((dayOfWeek == 6 && estDate.getHours() >= 9 && estDate.getHours() < 17) || (dayOfWeek != 6 && estDate.getHours() >= 8 && estDate.getHours() < 22)) {
                        setTimeout(agentOnline, 2000);
                    } else {
                        setTimeout(agentOffline, 2000);
                    }
                } else {
                    setTimeout(agentOffline, 2000);
                }
            }
            getHolidayList();    //To Show Chat icon on page load
            //To show the Online/Offline Chat Icon on the basis of HolidayList, Working Hours and Working Days End
        </script>
        
        <script type='text/javascript'>
            document.querySelector('#IconImage').src = "https://fcagroup--uat.sandbox.my.salesforce-sites.com/Tier1ExternalSite/resource/1692958517000/Tier1ChatIcon";
            document.querySelector('#IconImage').title = "Chat with Fiat Team Specialist";
        </script>
    </body>
